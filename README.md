# Work-Work Framework

ğŸš€ ä¸€ä¸ªç°ä»£åŒ–ã€æ¨¡å—åŒ–çš„Node.jsåº”ç”¨æ¡†æ¶ï¼Œä¸“ä¸ºå®¶åº­ç½‘ç»œå’Œäº‘æœåŠ¡ç®¡ç†è€Œè®¾è®¡ã€‚

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

Work-Work Framework æ˜¯ä¸€ä¸ªåŸºäºDockerçš„å¾®æœåŠ¡æ¶æ„æ¡†æ¶ï¼Œæä¾›äº†HTTPæœåŠ¡å’Œç½‘ç»œå·¥å…·çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚æ‰€æœ‰ç»„ä»¶å®Œå…¨ç‹¬ç«‹ï¼Œå¯ä»¥å•ç‹¬å¼€å‘ã€æ„å»ºå’Œéƒ¨ç½²ã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ—ï¸ **å¾®æœåŠ¡æ¶æ„**: æ¯ä¸ªç»„ä»¶å®Œå…¨ç‹¬ç«‹ï¼ŒåŒ…å«è‡ªå·±çš„é…ç½®å’Œä¾èµ–
- ğŸ³ **DockeråŸç”Ÿ**: æ¯ä¸ªæœåŠ¡éƒ½æœ‰ç‹¬ç«‹çš„Dockeré•œåƒ
- ğŸ”§ **ç®€åŒ–ç®¡ç†**: åªæœ‰3ä¸ªæ ¸å¿ƒè„šæœ¬ï¼ŒåŠŸèƒ½å•ä¸€æ˜“ç”¨
- ğŸŒ **Next.jsæ¡†æ¶**: HTTPæœåŠ¡åŸºäºNext.jsï¼Œæä¾›ç°ä»£åŒ–çš„å‰ç«¯ä½“éªŒ
- ğŸ“Š **å®æ—¶ç›‘æ§**: å†…ç½®å¥åº·æ£€æŸ¥å’ŒçŠ¶æ€ç›‘æ§
- ğŸ”„ **è‡ªåŠ¨åŒ–å·¥å…·**: DDNSè‡ªåŠ¨æ›´æ–°ã€ç½‘ç»œç›‘æ§ç­‰

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Work-Work Framework                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸŒ HTTP Services                    ğŸ”§ Tools               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Cloud HTTP Service â”‚            â”‚     DDNS Tool       â”‚  â”‚
â”‚  â”‚     (Next.js)       â”‚            â”‚   (TypeScript)      â”‚  â”‚
â”‚  â”‚     Port: 9110      â”‚            â”‚     Port: 9910      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚  Home HTTP Service  â”‚                                    â”‚
â”‚  â”‚     (Next.js)       â”‚                                    â”‚
â”‚  â”‚     Port: 9111      â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç»„ä»¶è¯´æ˜

| ç»„ä»¶ | æŠ€æœ¯æ ˆ | ç«¯å£ | åŠŸèƒ½æè¿° |
|------|--------|------|----------|
| **Cloud HTTP Service** | Next.js + TypeScript | 9110 | äº‘æœåŠ¡APIï¼Œæä¾›IPæŸ¥è¯¢ã€ç³»ç»Ÿç›‘æ§ç­‰åŠŸèƒ½ |
| **Home HTTP Service** | Next.js + TypeScript | 9111 | å®¶åº­ç½‘ç»œæœåŠ¡ï¼Œç½‘ç»œè¯Šæ–­ã€è®¾å¤‡ç›‘æ§ç­‰ |
| **DDNS Tool** | TypeScript + Express | 9910 | åŠ¨æ€DNSæ›´æ–°å·¥å…·ï¼Œè‡ªåŠ¨ç›‘æ§IPå˜åŒ– |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- **Node.js** 18+ 
- **Docker** 20+
- **Docker Compose** 2.0+

### 1ï¸âƒ£ å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd work-work
```

### 2ï¸âƒ£ å¯åŠ¨æ‰€æœ‰æœåŠ¡

```bash
# å¯åŠ¨æ‰€æœ‰DockeræœåŠ¡
./scripts/deploy.sh start

# æˆ–è€…ä½¿ç”¨Docker Compose
docker-compose up -d
```

### 3ï¸âƒ£ éªŒè¯æœåŠ¡çŠ¶æ€

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
./scripts/status.sh

# æˆ–æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
./scripts/status.sh --verbose
```

### 4ï¸âƒ£ è®¿é—®æœåŠ¡

- ğŸ  **å®¶ç”¨æœåŠ¡**: http://localhost:9111
- â˜ï¸ **äº‘æœåŠ¡**: http://localhost:9110  
- ğŸ”§ **DDNSå·¥å…·**: http://localhost:9910

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æœ¬åœ°å¼€å‘æ¨¡å¼

#### å¼€å‘å•ä¸ªæœåŠ¡

```bash
# æ„å»ºäº‘æœåŠ¡ï¼ˆæœ¬åœ°å¼€å‘æ¨¡å¼ï¼‰
./scripts/build.sh cloud-http-service

# è¿›å…¥æœåŠ¡ç›®å½•è¿›è¡Œå¼€å‘
cd services/cloud-http-service
npm run dev
```

#### æ„å»ºDockeré•œåƒ

```bash
# æ„å»ºå•ä¸ªæœåŠ¡çš„Dockeré•œåƒ
./scripts/build.sh cloud-http-service --docker

# æ¸…ç†åé‡æ–°æ„å»º
./scripts/build.sh ddns-tool --docker --clean
```

### ç»„ä»¶å¼€å‘

æ¯ä¸ªç»„ä»¶éƒ½æ˜¯å®Œå…¨ç‹¬ç«‹çš„ï¼š

```bash
work-work/
â”œâ”€â”€ services/cloud-http-service/
â”‚   â”œâ”€â”€ package.json          # ç‹¬ç«‹çš„ä¾èµ–ç®¡ç†
â”‚   â”œâ”€â”€ Dockerfile            # ç‹¬ç«‹çš„Dockeræ„å»º
â”‚   â”œâ”€â”€ pages/                # Next.jsé¡µé¢
â”‚   â”œâ”€â”€ utils/logger.ts       # ç»„ä»¶å†…éƒ¨å·¥å…·
â”‚   â””â”€â”€ config/config.json    # ç»„ä»¶é…ç½®
â”œâ”€â”€ services/home-http-service/
â”‚   â””â”€â”€ ... (ç±»ä¼¼ç»“æ„)
â””â”€â”€ tools/ddns-tool/
    â”œâ”€â”€ package.json          # ç‹¬ç«‹çš„ä¾èµ–ç®¡ç†
    â”œâ”€â”€ src/index.ts          # TypeScriptå…¥å£
    â””â”€â”€ config/config.json    # å·¥å…·é…ç½®
```

## ğŸ“œ è„šæœ¬ä½¿ç”¨æŒ‡å—

### ğŸ”¨ æ„å»ºè„šæœ¬ (`build.sh`)

```bash
# æœ¬åœ°å¼€å‘æ„å»º
./scripts/build.sh <ç»„ä»¶å>

# Dockeré•œåƒæ„å»º  
./scripts/build.sh <ç»„ä»¶å> --docker

# æ¸…ç†åæ„å»º
./scripts/build.sh <ç»„ä»¶å> --clean

# å¯ç”¨ç»„ä»¶: cloud-http-service, home-http-service, ddns-tool
```

### ğŸš€ éƒ¨ç½²è„šæœ¬ (`deploy.sh`)

```bash
# å¯åŠ¨æœåŠ¡
./scripts/deploy.sh start [ç»„ä»¶å]           # å¯åŠ¨æ‰€æœ‰æˆ–æŒ‡å®šæœåŠ¡

# åœæ­¢æœåŠ¡  
./scripts/deploy.sh stop [ç»„ä»¶å]            # åœæ­¢æ‰€æœ‰æˆ–æŒ‡å®šæœåŠ¡

# é‡å¯æœåŠ¡
./scripts/deploy.sh restart [ç»„ä»¶å]         # é‡å¯æ‰€æœ‰æˆ–æŒ‡å®šæœåŠ¡

# æ¸…ç†èµ„æº
./scripts/deploy.sh clean [ç»„ä»¶å]           # æ¸…ç†Dockeré•œåƒå’Œå®¹å™¨

# é‡æ–°éƒ¨ç½²
./scripts/deploy.sh redeploy [ç»„ä»¶å]        # å®Œæ•´çš„é‡æ–°éƒ¨ç½²æµç¨‹
```

### ğŸ” çŠ¶æ€æ£€æŸ¥è„šæœ¬ (`status.sh`)

```bash
# åŸºæœ¬çŠ¶æ€æ£€æŸ¥
./scripts/status.sh

# è¯¦ç»†ä¿¡æ¯æ£€æŸ¥
./scripts/status.sh --verbose

# å¿«é€Ÿæ£€æŸ¥ï¼ˆè·³è¿‡å¥åº·æ£€æŸ¥ï¼‰
./scripts/status.sh --quick
```

## ğŸ“¡ API æ¥å£æ–‡æ¡£

### äº‘æœåŠ¡ (Port: 9110)

| æ¥å£ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/api/health` | GET | æœåŠ¡å¥åº·æ£€æŸ¥ |
| `/api/get-my-ip` | GET | è·å–è®¿é—®è€…IPåœ°å€ |
| `/` | GET | æœåŠ¡é¦–é¡µï¼Œè¿”å› "tide" |

### å®¶ç”¨æœåŠ¡ (Port: 9111)

| æ¥å£ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/api/health` | GET | æœåŠ¡å¥åº·æ£€æŸ¥ |
| `/` | GET | å®¶ç”¨æœåŠ¡ç®¡ç†ç•Œé¢ |

### DDNSå·¥å…· (Port: 9910)

| æ¥å£ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/health` | GET | å·¥å…·å¥åº·æ£€æŸ¥ |
| `/status` | GET | å½“å‰IPçŠ¶æ€å’Œé…ç½®ä¿¡æ¯ |
| `/trigger` | POST | æ‰‹åŠ¨è§¦å‘IPæ£€æŸ¥å’Œæ›´æ–° |

## ğŸ”§ é…ç½®è¯´æ˜

æ¯ä¸ªç»„ä»¶éƒ½æœ‰ç‹¬ç«‹çš„é…ç½®æ–‡ä»¶ï¼š

### äº‘æœåŠ¡é…ç½® (`services/cloud-http-service/config/config.json`)

```json
{
  "server": {
    "port": 9110,
    "host": "0.0.0.0"
  },
  "api": {
    "rateLimit": 100,
    "timeout": 10000
  },
  "logging": {
    "level": "info",
    "file": "./logs/cloud-service.log"
  }
}
```

### DDNSå·¥å…·é…ç½® (`tools/ddns-tool/config/config.json`)

```json
{
  "checkInterval": 30,
  "dnsProvider": "cloudflare",
  "ipCheckUrl": "http://cloud-http-service:9110/api/get-my-ip",
  "healthCheck": {
    "enabled": true,
    "port": 9910
  }
}
```

## ğŸ³ Docker éƒ¨ç½²

### å•ä¸ªæœåŠ¡éƒ¨ç½²

```bash
# æ„å»ºå¹¶å¯åŠ¨äº‘æœåŠ¡
./scripts/build.sh cloud-http-service --docker
./scripts/deploy.sh start cloud-http-service
```

### å®Œæ•´ç³»ç»Ÿéƒ¨ç½²

```bash
# æ–¹å¼1: ä½¿ç”¨éƒ¨ç½²è„šæœ¬
./scripts/deploy.sh start

# æ–¹å¼2: ç›´æ¥ä½¿ç”¨Docker Compose
docker-compose up -d

# æ£€æŸ¥éƒ¨ç½²çŠ¶æ€
./scripts/status.sh --verbose
```

### ç¯å¢ƒå˜é‡é…ç½®

é€šè¿‡ç¯å¢ƒå˜é‡è‡ªå®šä¹‰é…ç½®ï¼š

```bash
# è®¾ç½®æ—¥å¿—çº§åˆ«
export LOG_LEVEL=debug

# è®¾ç½®DDNSæ£€æŸ¥é—´éš”ï¼ˆç§’ï¼‰
export CHECK_INTERVAL_SECONDS=60

# å¯åŠ¨æœåŠ¡
docker-compose up -d
```

## ğŸ” ç›‘æ§å’Œæ—¥å¿—

### å¥åº·æ£€æŸ¥

æ‰€æœ‰æœåŠ¡éƒ½æä¾›å¥åº·æ£€æŸ¥æ¥å£ï¼š

```bash
# æ£€æŸ¥æ‰€æœ‰æœåŠ¡å¥åº·çŠ¶æ€
curl http://localhost:9111/api/health
curl http://localhost:9110/api/health  
curl http://localhost:9910/health
```

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—
docker-compose logs

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose logs ddns-tool

# å®æ—¶è·Ÿè¸ªæ—¥å¿—
docker-compose logs -f cloud-http-service
```

### çŠ¶æ€ç›‘æ§

```bash
# å®Œæ•´çŠ¶æ€æ£€æŸ¥
./scripts/status.sh --verbose

# å¿«é€ŸçŠ¶æ€æ£€æŸ¥  
./scripts/status.sh --quick
```

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: æœåŠ¡æ— æ³•å¯åŠ¨**
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
./scripts/status.sh
lsof -i :9111,9110,9910

# æ¸…ç†å¹¶é‡æ–°éƒ¨ç½²
./scripts/deploy.sh clean
./scripts/deploy.sh redeploy
```

**Q: DDNSå·¥å…·æ— æ³•æ›´æ–°DNS**
```bash
# æ£€æŸ¥é…ç½®
docker-compose logs ddns-tool

# æ£€æŸ¥ç½‘ç»œè¿æ¥
docker exec ddns-tool curl http://cloud-http-service:9110/api/get-my-ip
```

**Q: Dockeré•œåƒæ„å»ºå¤±è´¥**
```bash
# æ¸…ç†Dockerç¼“å­˜
docker system prune -f

# é‡æ–°æ„å»º
./scripts/build.sh <ç»„ä»¶å> --docker --clean
```

## ğŸ”„ æ›´æ–°å’Œç»´æŠ¤

### æ›´æ–°æœåŠ¡

```bash
# åœæ­¢æœåŠ¡
./scripts/deploy.sh stop

# æ‹‰å–æœ€æ–°ä»£ç 
git pull

# é‡æ–°æ„å»ºå’Œéƒ¨ç½²
./scripts/deploy.sh redeploy
```

### æ¸…ç†ç³»ç»Ÿ

```bash
# æ¸…ç†æ‰€æœ‰Dockerèµ„æº
./scripts/deploy.sh clean

# æ¸…ç†ç³»ç»Ÿç¼“å­˜
docker system prune -a -f
```

## ğŸ¤ å¼€å‘è§„èŒƒ

### ç¼–ç¨‹åŸåˆ™

- ğŸ¯ **åŠŸèƒ½ä¼˜å…ˆ**: ä¼˜å…ˆå®ç°åŠŸèƒ½ï¼Œé¿å…è¿‡åº¦æŠ½è±¡
- ğŸ”§ **ç®€å•è®¾è®¡**: ä¿æŒç®€å•ï¼Œä¸éœ€è¦æ—¶ä¸æ·»åŠ å¤æ‚æ€§
- ğŸ“¦ **ç‹¬ç«‹ç»„ä»¶**: æ¯ä¸ªç»„ä»¶å®Œå…¨ç‹¬ç«‹ï¼Œæœ‰è‡ªå·±çš„ä¾èµ–å’Œé…ç½®
- ğŸš« **é¿å…ç±»**: ä¼˜å…ˆä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹ï¼Œé¿å…é¢å‘å¯¹è±¡

### ä»£ç é£æ ¼

- ä½¿ç”¨ TypeScript è¿›è¡Œç±»å‹å®‰å…¨
- ä½¿ç”¨ ESLint å’Œ Prettier æ ¼å¼åŒ–ä»£ç 
- ä¸ºæ¯ä¸ªç»„ä»¶ç¼–å†™ç‹¬ç«‹çš„ READMEï¼ˆå¦‚éœ€è¦ï¼‰
- ç»Ÿä¸€çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

## ğŸ“š æ›´å¤šèµ„æº

- [Next.js å®˜æ–¹æ–‡æ¡£](https://nextjs.org/docs)
- [Docker Compose ä½¿ç”¨æŒ‡å—](https://docs.docker.com/compose/)
- [TypeScript æœ€ä½³å®è·µ](https://www.typescriptlang.org/docs/)

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ™ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/æ–°åŠŸèƒ½`)
3. æäº¤æ›´æ”¹ (`git commit -am 'æ·»åŠ æ–°åŠŸèƒ½'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/æ–°åŠŸèƒ½`)
5. åˆ›å»º Pull Request

---

**é¡¹ç›®ç»´æŠ¤è€…**: @microTT  
**æœ€åæ›´æ–°**: 2025å¹´6æœˆ29æ—¥
